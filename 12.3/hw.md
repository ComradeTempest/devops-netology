Наперво посчитаем, что к чему.


База данных должна быть отказоустойчивой. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии. 3 ядра, 12 гигов оперативки.

Кэш должен быть отказоустойчивый. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии. 3 ядра, 12 гигов оперативки.

Фронтенд обрабатывает внешние запросы быстро, отдавая статику. Потребляет не более 50 МБ ОЗУ на каждый экземпляр, 0.2 ядра. 5 копий. 1 ядро и 250 мегабайт оперативы.

Бекенд потребляет 600 МБ ОЗУ и по 1 ядру на копию. 10 копий. 10 ядер и 6 гигабайт.
    
Итого 17 ядер и с округлением 31 гигабайт оперативки.
    
Теперь считаем сразу с учётом фейловера. Прибавляем везде по ноде и раскидываем сервисы, опираясь на требования и минимальный рекомендуемый конфиг «2 ядра 2 гига» для одной ноды. Берём запас на ОС и на какую-нибудь внезапную дичь.

4 виртуалки под БД и фронт-бэк (дублироваться экземпляры сервиса на одной ВМ не могут из-за требований, плюс одна запасная), каждая по 6 ГБ ОЗУ и с четырьмя ядрами (БД, бэк и система) — 24 ГБ ОЗУ и 16 ядер. 

4 виртуалки под кэш и фронт-бэк (дублироваться с БД или между собой также на одной ВМ не могут из-за требований и нагрузки на storage, плюс одна запасная), каждая по 6 ГБ ОЗУ и с четырьмя ядрами — 24 ГБ ОЗУ и 16 ядер. 

3 дополнительных под фронт и бэк. 2 ГБ ОЗУ и 2 ядра каждая. 6 и 6.

3 под контроль. 2 ГБ ОЗУ и 2 ядра каждая. 6 и 6.

Итого 14 нод. 8 виртуалок 6 RAM/4 Core, 6 виртуалок 2 RAM/ 2 Core. Или 60 оперативы и 44 ядра.
