# Домашнее задание к занятию "10.01. Зачем и что нужно мониторить"

## Обязательные задания

1. Вас пригласили настроить мониторинг на проект. На онбординге вам рассказали, что проект представляет из себя 
платформу для вычислений с выдачей текстовых отчетов, которые сохраняются на диск. Взаимодействие с платформой 
осуществляется по протоколу http. Также вам отметили, что вычисления загружают ЦПУ. Какой минимальный набор метрик вы
выведите в мониторинг и почему?

Раз дело имеем в основном с файлами, которые бегают через веб-морду и хранятся на диске, то нам нужно мониторить:

— Веб-сервак. Количество запросов к нему, отдачу кодов, доступность вебморды из пользовательской сети.

— Диск. Свободное место, активное время (чтобы не упереться в IO дисковой системы), можно добавить мониторинг здоровья массива.

— tx и rx на сетевом интерфейсе для общего понимания утилизации канала.

— Стандартные метрики утилизации CPU и RAM.


2. Менеджер продукта посмотрев на ваши метрики сказал, что ему непонятно что такое RAM/inodes/CPUla. Также он сказал, 
что хочет понимать, насколько мы выполняем свои обязанности перед клиентами и какое качество обслуживания. Что вы 
можете ему предложить?

Менеджеру нужно налить кофе, усадить за стол, открыть SLA, так как если сервис на поддержке (а оно выглядит именно так),
то заключение договора без SLA звучит маловероятно. Потом аккуратно объяснить, мол, смотри, Игорь, тут у нас были определены SLO держать
доступность сервиса 99.9 с обработкой 95% запросов за 8 секунд. А потом мы на этих SLO заключили с клиентом SLA о том, что
мы обещаем доступность 99.9, обработку в указанных рамках и реакцию на инциденты сообразно параграфу о приоритетах и SLI.
Но вообще если продакт-менеджер забыл про SLA, то с ним надо поосторожнее, мало ли что с ним стряслось.


3. Вашей DevOps команде в этом году не выделили финансирование на построение системы сбора логов. Разработчики в свою 
очередь хотят видеть все ошибки, которые выдают их приложения. Какое решение вы можете предпринять в этой ситуации, 
чтобы разработчики получали ошибки приложения?

Значит, работаем в формате cheap&cheerful — дёшево и сердито. Если у нас есть много свободной мощи и нет санкций, то ставим кубернетес,
ELK-стек плюс filebeat для сбора логов. Если у нас один некрупный сервер в геозоне, не допущенной к ресурсам ELK, то имеет смысл развернуть
на нём более малотребовательную связку, например развернуть в докере через компоуз взаимонастроенную пару из loki и grafana с использованием стороннего
коллектора типа fluentd.


4. Вы, как опытный SRE, сделали мониторинг, куда вывели отображения выполнения SLA=99% по http кодам ответов. 
Вычисляете этот параметр по следующей формуле: summ_2xx_requests/summ_all_requests. Данный параметр не поднимается выше 
70%, но при этом в вашей системе нет кодов ответа 5xx и 4xx. Где у вас ошибка?

Мы потеряли единички и тройки. Насчёт информационных единичек не уверен, а вот тройки-редиректы тоже имеет смысл учесть как успешные
и включить их в формулу в виде суммы 2хх и 3хх.

---
